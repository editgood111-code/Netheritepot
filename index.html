<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Netheritepot Tierlist</title>
<style>
body { font-family: Arial,sans-serif; background:#0d1117; color:#c9d1d9; text-align:center; padding:20px; }
h1 { color:#ffcc00; margin-bottom:20px; }

.search-container { margin-bottom:20px; }
.search-container input { padding:6px 12px; border-radius:6px; border:none; width:220px; }
.search-container button { padding:6px 12px; margin-left:5px; background:#238636; color:white; border:none; border-radius:6px; cursor:pointer; }
.search-container button:hover { background:#2ea043; }

#search-result { margin-bottom:20px; display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap; }
.mini-card { background:#161b22; padding:10px; border-radius:8px; display:flex; flex-direction:column; align-items:center; gap:6px; width:220px; }
.mini-card img.skin { width:64px; height:64px; border-radius:8px; border:2px solid #fff; }
.mini-card .region { font-size:13px; color:#9aa; }
.mini-card .name { font-weight:700; font-size:15px; }
.mini-card .namemc { color:#6f9bff; font-size:13px; text-decoration:none; }
.mini-card .tier-box { display:flex; align-items:center; gap:6px; background:#238636; padding:4px 8px; border-radius:4px; font-weight:700; font-size:13px; }
.mini-card .tier-box img { width:16px; height:16px; }

.leaderboard { display:flex; justify-content:space-between; max-width:1200px; margin:0 auto; gap:10px; overflow-x:auto; }
.tier-column { flex:1; min-width:180px; }
.tier-column h2 { text-align:center; color:#58a6ff; border-bottom:1px solid #30363d; padding-bottom:5px; margin-bottom:5px; }
.rows { display:flex; flex-direction:column; gap:4px; padding:0 6px; }

.player-row { display:flex; align-items:center; gap:6px; padding:4px 6px; border-radius:6px; position:relative; transition:transform .2s, box-shadow .2s; overflow:visible; background:#0d1117; }
.player-row:hover { transform:translateX(10px); z-index:50; box-shadow:0 4px 15px rgba(0,0,0,0.5); }

.player-row img { width:28px; height:28px; border-radius:6px; border:1px solid #fff; }
.player-name { font-weight:600; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.left-color { position:absolute; left:0; top:0; bottom:0; width:4px; border-radius:6px; }

.tooltip { position:absolute; left:calc(100% + 6px); top:50%; transform:translateY(-50%); background:#238636; color:white; padding:4px 8px; border-radius:4px; font-size:12px; white-space:nowrap; opacity:0; pointer-events:none; transition:opacity .2s; }
.player-row:hover .tooltip { opacity:1; pointer-events:auto; }

button { padding:6px 12px; margin-top:10px; background:#238636; color:white; border:none; border-radius:6px; cursor:pointer; transition:0.3s; }
button:hover { background:#2ea043; }

</style>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
<h1>Netheritepot Tierlist</h1>

<div class="search-container">
  <input type="text" id="search-input" placeholder="Search any player (ign)">
  <button onclick="searchPlayer()">Search</button>
</div>

<div id="search-result"></div>
<div class="leaderboard" id="leaderboard-container"></div>
<div style="margin-top:20px;">
  <button onclick="addPlayer()">Add / Update (Admin)</button>
  <button onclick="removePlayer()">Remove (Admin)</button>
</div>

<script>
const secretKey="aceppp1122";
const categories=["T1","T2","T3","T4","T5"];
const categoryMap={
  "HT1":"T1","LT1":"T1","RHT1":"T1","RLT1":"T1",
  "HT2":"T2","LT2":"T2","RHT2":"T2","RLT2":"T2",
  "HT3":"T3","LT3":"T3","RHT3":"T3","RLT3":"T3",
  "HT4":"T4","LT4":"T4","HT5":"T5","LT5":"T5"
};
const regionColors={AS:"#6f9bff",EU:"#8a2be2",NA:"#ffb86b",ME:"#f66",AU:"#2eea9e"};

firebase.initializeApp({
  apiKey:"AIzaSyB3FWTZ587KxVbe1POuw-2Rk5FSrcpZ_QU",
  authDomain:"tierlist-3305a.firebaseapp.com",
  databaseURL:"https://tierlist-3305a-default-rtdb.firebaseio.com",
  projectId:"tierlist-3305a",
  storageBucket:"tierlist-3305a.firebasestorage.app",
  messagingSenderId:"410709885310",
  appId:"1:410709885310:web:ceab1ca94e0f45513f332f"
});

const db=firebase.database();
const playersRef=db.ref("players");
let players=[];

function getHeadURL(name,type="premium"){return type==="premium"?`https://mc-heads.net/avatar/${encodeURIComponent(name)}/32`:"https://mc-heads.net/avatar/Steve/32";}

playersRef.once("value",snapshot=>{
  const data=snapshot.val();
  if(data){players=data;}
  else{players=[
    {name:"Swight",tier:"HT1",region:"EU",skin:getHeadURL("Swight"),type:"premium",aliases:[]},
    {name:"Marlowww",tier:"LT2",region:"NA",skin:getHeadURL("Marlowww"),type:"premium",aliases:[]},
    {name:"ItzRealMe",tier:"HT3",region:"AS",skin:getHeadURL("ItzRealMe"),type:"premium",aliases:[]}
  ]; playersRef.set(players);}
  render();
});

function savePlayers(){playersRef.set(players);}

function render(){
  // update premium skins
  players.forEach(p=>{if(p.type==="premium") p.skin=getHeadURL(p.name);});

  const container=document.getElementById("leaderboard-container");
  container.innerHTML="";
  const cols={};
  categories.forEach(cat=>{
    const col=document.createElement("div"); col.className="tier-column";
    const h2=document.createElement("h2"); h2.textContent=cat; col.appendChild(h2);
    const rows=document.createElement("div"); rows.className="rows"; col.appendChild(rows);
    container.appendChild(col); cols[cat]=rows;
  });

  categories.forEach(cat=>{
    const catPlayers=players.filter(p=>categoryMap[p.tier]===cat)
      .sort((a,b)=>{const order=["HT","RHT","LT","RLT"]; const ai=order.indexOf(a.tier.replace(/[0-9]/g,"").slice(0,3));
      const bi=order.indexOf(b.tier.replace(/[0-9]/g,"").slice(0,3)); if(ai!==bi) return ai-bi; return a.name.localeCompare(b.name);});

    catPlayers.forEach(p=>{
      const row=document.createElement("div"); row.className="player-row";
      const left=document.createElement("div"); left.className="left-color"; left.style.background=regionColors[p.region]||"#888";
      const head=document.createElement("img"); head.src=p.skin; head.alt=p.name; head.className="head";
      const nameSpan=document.createElement("div"); nameSpan.className="player-name"; nameSpan.textContent=p.name;
      const tooltip=document.createElement("div"); tooltip.className="tooltip"; tooltip.textContent=`${p.region} | ${p.tier}`;
      row.appendChild(left); row.appendChild(head); row.appendChild(nameSpan); row.appendChild(tooltip);
      row.addEventListener("mouseenter",()=>{row.style.zIndex=50;}); row.addEventListener("mouseleave",()=>{row.style.zIndex="";});
      cols[cat].appendChild(row);
    });
  });
}

function addPlayer(){const key=prompt("Admin key:");if(key!==secretKey){alert("Unauthorized");return;}
const name=prompt("Player IGN:");if(!name)return; const tier=prompt("Tier (HT1..RHT3)","HT1")||"HT1";
const region=prompt("Region (AS,EU,ME,AU,NA)","NA").toUpperCase(); const type=prompt("premium/crack","premium").toLowerCase();
const existing=players.find(p=>p.name.toLowerCase()===name.toLowerCase());
if(existing){existing.tier=tier; existing.region=region; existing.type=type; if(type==="premium") existing.skin=getHeadURL(name); else existing.skin=getHeadURL("Steve","crack"); savePlayers(); render(); return;}
players.push({name,tier,region,type,skin:type==="premium"?getHeadURL(name):getHeadURL("Steve","crack"),aliases:[]}); savePlayers(); render();
}

function removePlayer(){const key=prompt("Admin key:");if(key!==secretKey){alert("Unauthorized");return;}
const name=prompt("Player IGN to remove:");if(!name)return; players=players.filter(p=>p.name.toLowerCase()!==name.toLowerCase()); savePlayers(); render();}

function searchPlayer(){
  const q=document.getElementById("search-input").value.toLowerCase().trim();
  const resultDiv=document.getElementById("search-result"); resultDiv.innerHTML="";
  const p=players.find(pl=>pl.name.toLowerCase()===q||pl.aliases?.map(a=>a.toLowerCase()).includes(q));
  if(!p){alert("Player not found"); return;}
  const div=document.createElement("div"); div.className="mini-card";
  div.innerHTML=`<img class="skin" src="${p.skin}" alt="${p.name}">
  <div class="region">${p.region}</div>
  <div class="name">${p.name}</div>
  <div class="tier-box"><img src="https://mctiers.com/tier_icons/nethop.svg" alt="helmet"><div class="tier-text">${p.tier}</div></div>`;
  resultDiv.appendChild(div);
}
</script>
</body>
</html>
