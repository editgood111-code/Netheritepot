<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NetheritePot | Professional Rankings</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-app: #09090b; --bg-sidebar: #0f0f12; --bg-card: #131316; --bg-strip: #1c1c21;
    --border: #27272a; --text-main: #fafafa; --text-muted: #a1a1aa; --accent: #ef4444;
    --t1: #ef4444; --t2: #f97316; --t3: #eab308; --t4: #22c55e; --t5: #3b82f6;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background-color: var(--bg-app); color: var(--text-main); font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; }
  .sidebar { width: 260px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 24px; }
  .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 10px; color: var(--text-muted); cursor: pointer; font-weight: 600; transition: 0.2s; margin-bottom: 4px; }
  .nav-item.active { background: var(--bg-card); color: #fff; }
  .main-wrapper { flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto; }
  .top-bar { padding: 20px 40px; position: sticky; top: 0; background: rgba(9,9,11,0.8); backdrop-filter: blur(10px); z-index: 10; display: flex; justify-content: flex-end; }
  .search-input { width: 320px; background: var(--bg-card); border: 1px solid var(--border); padding: 12px 16px; border-radius: 12px; color: #fff; outline: none; }
  .view-container { padding: 0 40px 40px 40px; width: 100%; max-width: 1400px; margin: 0 auto; }
  .tier-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; }
  .tier-col { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; }
  .col-header { padding: 14px; text-align: center; font-weight: 800; text-transform: uppercase; font-size: 12px; }
  .player-strip { display: flex; align-items: center; gap: 12px; padding: 10px; border-radius: 10px; background: var(--bg-strip); margin: 8px; cursor: pointer; transition: 0.2s; }
  .player-strip:hover { background: #27272a; transform: scale(1.02); }
  .rank-item { display: flex; align-items: center; gap: 20px; padding: 16px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; margin-bottom: 10px; cursor: pointer; }
  .not-found { text-align: center; padding: 100px 0; color: var(--text-muted); }
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

  <aside class="sidebar">
    <div style="font-weight: 800; font-size: 20px; margin-bottom: 40px;">NetheritePot</div>
    <div class="nav-menu">
      <div class="nav-item active" id="btn-overall" onclick="switchView('overall')">Overall</div>
      <div class="nav-item" id="btn-nethpot" onclick="switchView('nethpot')">NethPot Grid</div>
    </div>
  </aside>

  <main class="main-wrapper">
    <div class="top-bar">
      <input type="text" id="search" class="search-input" placeholder="Search players..." onkeyup="renderViews()">
    </div>
    <div class="view-container">
      <div id="view-overall"></div>
      <div id="view-nethpot" style="display:none"></div>
    </div>
  </main>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyB3FWTZ587KxVbe1POuw-2Rk5FSrcpZ_QU",
  databaseURL: "https://tierlist-3305a-default-rtdb.firebaseio.com",
  projectId: "tierlist-3305a",
  appId: "1:410709885310:web:ceab1ca94e0f45513f332f"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
let players = [];
let currentTab = 'overall';

const POINT_MAP = { "HT1": 60, "LT1": 45, "HT2": 30, "LT2": 20, "HT3": 10, "LT3": 6, "HT4": 4, "LT4": 3, "HT5": 2, "LT5": 1 };

db.ref("players").on("value", snap => {
  players = Object.values(snap.val() || {});
  renderViews();
});

function switchView(view) {
  currentTab = view;
  document.getElementById('view-overall').style.display = view === 'overall' ? 'block' : 'none';
  document.getElementById('view-nethpot').style.display = view === 'nethpot' ? 'grid' : 'none';
  document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
  document.getElementById('btn-' + view).classList.add('active');
  renderViews();
}

function renderViews() {
  const query = document.getElementById("search").value.toLowerCase();
  const filtered = players.map(p => {
    const clean = p.tier.replace('R', '').toUpperCase();
    return { ...p, pts: POINT_MAP[clean] || 0, col: clean.match(/\d/)?.[0] || "5" };
  }).filter(p => p.name.toLowerCase().includes(query));

  const overall = document.getElementById("view-overall");
  const grid = document.getElementById("view-nethpot");

  if (filtered.length === 0) {
    const msg = `<div class="not-found"><h2>No Player Found</h2><p>We couldn't find anyone matching "${query}"</p></div>`;
    overall.innerHTML = grid.innerHTML = msg;
    grid.style.display = 'block';
    return;
  } else { grid.style.display = currentTab === 'nethpot' ? 'grid' : 'none'; }

  // Overall Render
  overall.innerHTML = '<h2 style="margin-bottom:20px">Global Leaderboard</h2>';
  filtered.sort((a,b) => b.pts - a.pts).forEach((p, i) => {
    overall.innerHTML += `<div class="rank-item"><b>#${i+1}</b> <img src="https://mc-heads.net/avatar/${p.name}/32"> <span>${p.name}</span> <span style="margin-left:auto">${p.pts} PTS</span></div>`;
  });

  // Grid Render
  grid.innerHTML = "";
  ["1", "2", "3", "4", "5"].forEach(n => {
    let html = `<div class="tier-col"><div class="col-header" style="background:var(--t${n})">Tier ${n}</div>`;
    filtered.filter(p => p.col === n).forEach(p => {
      html += `<div class="player-strip"><img src="https://mc-heads.net/avatar/${p.name}/24"> <span>${p.name}</span></div>`;
    });
    grid.innerHTML += html + '</div>';
  });
}
</script>
</body>
</html>
