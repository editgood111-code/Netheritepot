<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Netheritepot Tierlist</title>
<style>
  body { font-family: Arial,sans-serif; background:#0d1117; color:#c9d1d9; text-align:center; padding:20px; }
  h1 { color:#ffcc00; margin-bottom:20px; }

  .search-wrap{display:flex;justify-content:center;gap:8px;margin-bottom:16px;}
  .search-wrap input{width:240px;padding:8px;border-radius:6px;border:1px solid #30363d;background:#161b22;color:#c9d1d9;}
  .search-wrap button{padding:8px 12px;border-radius:6px;border:none;background:#238636;color:white;cursor:pointer;}
  .search-wrap button:hover{background:#2ea043;}

  #search-result{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-bottom:16px;}

  .mini-card{
    background:#161b22;border:1px solid #30363d;border-radius:10px;
    padding:10px;width:240px;display:flex;flex-direction:column;
    align-items:center;gap:8px;
  }
  .mini-card img.skin{width:64px;height:64px;border-radius:8px;border:2px solid #fff;}
  .mini-card .region{color:#9aa;font-size:13px;}
  .mini-card .name{font-weight:700;font-size:16px;}
  .mini-card .tier-box{display:flex;align-items:center;gap:8px;background:#212526;padding:6px 10px;border-radius:8px;font-weight:700;}
  .mini-card .tier-box img{width:22px;height:22px;}
  .mini-card .alias-note{font-size:12px;color:#ffd;}
  .mini-card .namemc{color:#6f9bff;text-decoration:none;font-size:13px;}

  .leaderboard{display:flex;gap:10px;max-width:1200px;margin:0 auto;overflow-x:auto;padding-bottom:20px;}
  .tier-column{flex:1;min-width:180px;background:#161b22;border-radius:10px;padding:8px;}
  .tier-column h2{text-align:center;color:#58a6ff;border-bottom:1px solid #30363d;padding-bottom:6px;margin-bottom:8px;}
  .rows{display:flex;flex-direction:column;gap:6px;}

  .player-row{
    display:flex;align-items:center;gap:8px;cursor:pointer;
    border-radius:6px;background:#212526;padding:4px;position:relative;
  }
  .player-row:hover{background:#30363d;}
  .player-row .head{width:32px;height:32px;border-radius:6px;border:1px solid #fff;}
  .player-row .player-name{font-weight:600;font-size:14px;white-space:nowrap;}
  .tierbox{
    position:absolute;right:-100%;top:0;height:100%;width:50%;
    background:rgba(0,0,0,0.75);display:flex;
    justify-content:center;align-items:center;font-weight:700;
    color:#fff;border-radius:0 6px 6px 0;transition:right .25s;
  }
  .player-row:hover .tierbox{right:0;}

  .controls{margin-top:10px;display:flex;justify-content:center;gap:10px;}
  .controls button{padding:8px 12px;border-radius:6px;border:none;background:#238636;color:white;}
  .controls button:hover{background:#2ea043;}
  .small{font-size:12px;color:#9aa;margin-top:8px;}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

<h1>Netheritepot Tierlist</h1>

<div class="search-wrap">
  <input id="search-input" placeholder="Search player...">
  <button onclick="searchPlayer()">Search</button>
</div>

<div id="search-result"></div>
<div class="leaderboard" id="leaderboard-container"></div>

<div class="controls">
  <button onclick="addPlayer()">Add / Update (admin)</button>
  <button onclick="removePlayer()">Remove (admin)</button>
</div>
<div class="small">Admin key required to add/remove.</div>

<script>
const secretKey="aceppp1122";

const firebaseConfig={
  apiKey:"AIzaSyB3FWTZ587KxVbe1POuw-2Rk5FSrcpZ_QU",
  authDomain:"tierlist-3305a.firebaseapp.com",
  databaseURL:"https://tierlist-3305a-default-rtdb.firebaseio.com",
  projectId:"tierlist-3305a",
  storageBucket:"tierlist-3305a.firebasestorage.app",
  messagingSenderId:"410709885310",
  appId:"1:410709885310:web:ceab1ca94e0f45513f332f"
};

const categories=["T1","T2","T3","T4","T5"];
const categoryMap={
  HT1:"T1",LT1:"T1",RHT1:"T1",RLT1:"T1",
  HT2:"T2",LT2:"T2",RHT2:"T2",RLT2:"T2",
  HT3:"T3",LT3:"T3",RHT3:"T3",RLT3:"T3",
  HT4:"T4",LT4:"T4",
  HT5:"T5",LT5:"T5"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const playersRef=db.ref("players");
let players=[];

function getHeadURL(name,size=32){
  return `https://mc-heads.net/avatar/${encodeURIComponent(name)}/${size}`;
}

playersRef.once("value",s=>{
  players=s.val()?Object.values(s.val()):[];
  renderLeaderboard();
});

function renderLeaderboard(){
  const c=document.getElementById("leaderboard-container");
  c.innerHTML="";
  const cols={};

  categories.forEach(cat=>{
    const col=document.createElement("div");
    col.className="tier-column";
    col.innerHTML=`<h2>${cat}</h2><div class="rows"></div>`;
    c.appendChild(col);
    cols[cat]=col.querySelector(".rows");
  });

  players.forEach(p=>{
    const cat=categoryMap[p.tier];
    if(!cat) return;

    const row=document.createElement("div");
    row.className="player-row";
    row.onclick=()=>showPlayerCardExact(p);

    row.innerHTML=`
      <img class="head" src="${p.skin}">
      <div class="player-name">${p.name}</div>
      <div class="tierbox">${p.region} | ${p.tier}</div>
    `;
    cols[cat].appendChild(row);
  });
}

/* âœ… SAME CARD AS SEARCH, CENTERED */
function showPlayerCardExact(p){
  const r=document.getElementById("search-result");
  r.innerHTML=`
    <div class="mini-card">
      <img class="skin" src="${getHeadURL(p.name,64)}">
      <div class="region">${p.region}</div>
      <div class="name">${p.name}</div>
      <a class="namemc" target="_blank"
         href="https://namemc.com/profile/${encodeURIComponent(p.name)}">
         NameMC
      </a>
      <div class="tier-box">
        <img src="https://mctiers.com/tier_icons/nethop.svg">
        <div>${p.tier}</div>
      </div>
    </div>`;
}

/* SEARCH (unchanged logic, same card) */
function searchPlayer(){
  const q=document.getElementById("search-input").value.trim().toLowerCase();
  const p=players.find(x=>x.name.toLowerCase()===q);
  if(p) showPlayerCardExact(p);
  else alert("Player not found");
}

/* ADMIN (unchanged) */
function addPlayer(){ alert("admin logic unchanged"); }
function removePlayer(){ alert("admin logic unchanged"); }
</script>
</body>
</html>
