<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NetheritePot | Professional Rankings</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-app: #09090b; --bg-sidebar: #0f0f12; --bg-card: #131316; --bg-strip: #1c1c21;
    --border: #27272a; --text-main: #fafafa; --text-muted: #a1a1aa; --accent: #ef4444;
    --t1: #ef4444; --t2: #f97316; --t3: #eab308; --t4: #22c55e; --t5: #3b82f6;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background-color: var(--bg-app); color: var(--text-main); font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; }
  
  .sidebar { width: 280px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 24px; }
  .nav-item { display: flex; align-items: center; gap: 12px; padding: 14px; border-radius: 12px; color: var(--text-muted); cursor: pointer; font-weight: 600; transition: 0.2s; margin-bottom: 6px; }
  .nav-item.active { background: var(--bg-card); color: #fff; border: 1px solid var(--border); }
  
  .main-wrapper { flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto; }
  .top-bar { padding: 20px 40px; position: sticky; top: 0; background: rgba(9,9,11,0.8); backdrop-filter: blur(10px); z-index: 10; display: flex; justify-content: space-between; align-items: center; }
  .search-input { width: 350px; background: var(--bg-card); border: 1px solid var(--border); padding: 12px 20px; border-radius: 14px; color: #fff; outline: none; transition: 0.2s; }
  .search-input:focus { border-color: var(--accent); }

  .view-container { padding: 40px; width: 100%; max-width: 1200px; margin: 0 auto; }
  .rank-item { display: flex; align-items: center; gap: 20px; padding: 20px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; margin-bottom: 12px; transition: 0.2s; cursor: pointer; }
  .rank-item:hover { transform: translateY(-3px); border-color: #3f3f46; }
  .rank-pos { font-size: 28px; font-weight: 900; width: 50px; text-align: center; }
  .player-info { display: flex; flex-direction: column; flex-grow: 1; }
  
  /* Titles & Badges */
  .p-title { font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; display: flex; align-items: center; gap: 4px; }
  .title-grandmaster { color: #facc15; }
  .title-master { color: #f87171; }
  .title-ace { color: #60a5fa; }
  .title-specialist { color: #a1a1aa; }

  .tier-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
  .tier-col { background: var(--bg-card); border: 1px solid var(--border); border-radius: 18px; overflow: hidden; padding-bottom: 10px; }
  .col-header { padding: 15px; text-align: center; font-weight: 900; font-size: 13px; text-transform: uppercase; }
  .player-strip { display: flex; align-items: center; gap: 10px; padding: 10px; margin: 6px 10px; background: var(--bg-strip); border-radius: 10px; font-weight: 600; font-size: 14px; cursor: pointer; }

  .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); z-index: 100; display: none; align-items: center; justify-content: center; }
  .modal-overlay.open { display: flex; }
  .modal-card { width: 400px; background: #18181b; border: 1px solid var(--border); border-radius: 30px; padding: 40px; text-align: center; position: relative; }
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

  <aside class="sidebar">
    <div style="font-weight: 900; font-size: 22px; margin-bottom: 40px;">NetheritePot</div>
    <div class="nav-item active" id="btn-overall" onclick="switchView('overall')">Overall Rankings</div>
    <div class="nav-item" id="btn-nethpot" onclick="switchView('nethpot')">NethPot Tier List</div>
  </aside>

  <main class="main-wrapper">
    <div class="top-bar">
      <h2 id="view-title" style="font-weight: 800;">Overall Rankings</h2>
      <input type="text" id="search" class="search-input" placeholder="Search for a player..." onkeyup="renderViews()">
    </div>
    <div class="view-container">
      <div id="view-overall"></div>
      <div id="view-nethpot" style="display:none" class="tier-grid"></div>
    </div>
  </main>

  <div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
    <div class="modal-card">
      <img id="m-bust" style="width:120px; margin-bottom:20px;">
      <h2 id="m-name" style="font-size: 32px; font-weight: 800;"></h2>
      <p id="m-tier" style="font-weight: 700; color: var(--accent);"></p>
      <div id="m-pts" style="margin-top:20px; font-size: 20px; font-weight: 800;"></div>
    </div>
  </div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyB3FWTZ587KxVbe1POuw-2Rk5FSrcpZ_QU",
  databaseURL: "https://tierlist-3305a-default-rtdb.firebaseio.com",
  projectId: "tierlist-3305a",
  appId: "1:410709885310:web:ceab1ca94e0f45513f332f"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
let players = [];
let currentTab = 'overall';

const POINT_MAP = { "HT1": 60, "LT1": 45, "HT2": 30, "LT2": 20, "HT3": 10, "LT3": 6, "HT4": 4, "LT4": 3, "HT5": 2, "LT5": 1 };

db.ref("players").on("value", snap => {
  const data = snap.val();
  players = data ? Object.values(data) : [];
  renderViews();
});

function switchView(v) {
  currentTab = v;
  document.getElementById('view-overall').style.display = v === 'overall' ? 'block' : 'none';
  document.getElementById('view-nethpot').style.display = v === 'nethpot' ? 'grid' : 'none';
  document.getElementById('view-title').innerText = v === 'overall' ? 'Overall Rankings' : 'NethPot Tier List';
  document.querySelectorAll('.nav-item').forEach(e => e.classList.remove('active'));
  document.getElementById('btn-' + v).classList.add('active');
  renderViews();
}

function getTitleHtml(rank) {
  if (rank === 1) return `<span class="p-title title-grandmaster">üèÜ Combat Grandmaster</span>`;
  if (rank <= 3) return `<span class="p-title title-master">‚öîÔ∏è Combat Master</span>`;
  if (rank <= 7) return `<span class="p-title title-ace">üî• Combat Ace</span>`;
  if (rank <= 10) return `<span class="p-title title-specialist">üéñÔ∏è Combat Specialist</span>`;
  return "";
}

function renderViews() {
  const query = document.getElementById("search").value.toLowerCase();
  const filtered = players.map(p => {
    const raw = (p.tier || "LT5").toUpperCase();
    const clean = raw.replace('R', '');
    return { ...p, pts: POINT_MAP[clean] || 0, col: clean.match(/\d/)?.[0] || "5", displayTier: raw };
  }).filter(p => p.name.toLowerCase().includes(query));

  const overall = document.getElementById("view-overall");
  const grid = document.getElementById("view-nethpot");

  if (filtered.length === 0) {
    overall.innerHTML = grid.innerHTML = `<div style="text-align:center; padding:100px; opacity:0.5;">No results found.</div>`;
    return;
  }

  // Leaderboard
  overall.innerHTML = "";
  filtered.sort((a,b) => b.pts - a.pts).forEach((p, i) => {
    overall.innerHTML += `
      <div class="rank-item" onclick="openModal('${p.name}', '${p.displayTier}', ${p.pts})">
        <div class="rank-pos">#${i+1}</div>
        <img src="https://mc-heads.net/avatar/${p.name}/48" style="border-radius:10px;">
        <div class="player-info">
          <span style="font-weight: 800; font-size: 18px;">${p.name}</span>
          ${getTitleHtml(i+1)}
        </div>
        <div style="text-align:right">
          <span style="display:block; font-size: 20px; font-weight: 900;">${p.pts}</span>
          <span style="font-size: 10px; font-weight: 700; color: var(--text-muted);">POINTS</span>
        </div>
      </div>`;
  });

  // Grid
  grid.innerHTML = "";
  ["1", "2", "3", "4", "5"].forEach(n => {
    let html = `<div class="tier-col"><div class="col-header" style="background:var(--t${n})">Tier ${n}</div>`;
    filtered.filter(p => p.col === n).forEach(p => {
      html += `<div class="player-strip" onclick="openModal('${p.name}', '${p.displayTier}', ${p.pts})"><img src="https://mc-heads.net/avatar/${p.name}/24"> ${p.name}</div>`;
    });
    grid.innerHTML += html + '</div>';
  });
}

function openModal(name, tier, pts) {
  document.getElementById("m-name").innerText = name;
  document.getElementById("m-tier").innerText = tier;
  document.getElementById("m-pts").innerText = pts + " Points";
  document.getElementById("m-bust").src = `https://render.crafty.gg/3d/bust/${name}`;
  document.getElementById("modal-overlay").classList.add("open");
}

function closeModal(e) { if(e.target.id === 'modal-overlay') document.getElementById("modal-overlay").classList.remove("open"); }
</script>
</body>
</html>
